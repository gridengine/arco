<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
</head>


<body>





<h2><a name="Build_ARCo"></a>Build ARCo</h2>




<p>For building ARCo some additional third party tools are needed. The
easiest way to get access to these tools currently is to download the
N1 Grid Engine portion of &nbsp;the <a href="http://www.sun.com/software/swportfolio/get.jsp">Solaris Enterprise System.</a></p>




<p>Check the N1 Grid Engine check mark and press the orange 'Get
Downloads &amp; Media' button. &nbsp;After registration you will have access
to the necessary files.&nbsp;</p>


<table style="text-align: left; width: 100%; background-color: rgb(204, 204, 255);" border="1" cellpadding="2" cellspacing="2">


  <tbody>


    <tr>


      <td style="width: 626px;">Sun Web Console for Solaris x86<br>
Solaris Sparc </td>


      <td style="width: 248px;"><a href="https://sdlc3b.sun.com/ECom/EComActionServlet;jsessionid=1186E007790E6DC9B045E3B696408ED9#" onclick="javascript:validateLinkAction()">
            </a>
            
            swc-solx86_2.2.3.targz.zip<br>
      <a href="https://sdlc3b.sun.com/ECom/EComActionServlet;jsessionid=1186E007790E6DC9B045E3B696408ED9#" onclick="javascript:validateLinkAction()">
            </a>
            
            swc-sparc_2.2.3.targz.zip</td>


    </tr>


    <tr>


      <td style="width: 626px;">Sun Web Console for Linux

      </td>


      <td style="width: 248px;"><a href="https://sdlc3b.sun.com/ECom/EComActionServlet;jsessionid=1186E007790E6DC9B045E3B696408ED9#" onclick="javascript:validateLinkAction()">
            </a>
            
            swc-linux_2.2.3.targz.zip</td>


    </tr>


    <tr>


      <td style="width: 626px;">ARCo package for third party libraries/jar files from the ARCo package<br>
      </td>


      <td style="width: 248px;">n1ge6u9_arco_targz.zip<br>
n1ge6u9_arco_pkg.zip</td>


    </tr>


  
  
  </tbody>
</table>




<p>From the n1ge6u9-arco.tar.gz.zip file you can extract the third party
libraries that are required for building. Alternatively you can
download them from the links delivered below. Additional build
preliminaries like the JavaHelp system and the JWSDP package are listed
as well and are required for building.<span style="background-color: rgb(255, 0, 0);"><span style="background-color: rgb(255, 255, 255);"></span></span></p>

<table style="text-align: left; width: 100%; background-color: rgb(204, 204, 255);" border="1" cellpadding="2" cellspacing="2">

  <tbody>

    <tr>

      <td style="width: 285px;">jfreechart.jar<br>

jcommon.jar</td>

      <td style="width: 589px;"><a href="http://www.jfree.org/jfreechart/">JFreeChart</a></td>

    </tr>

    <tr>

      <td style="width: 285px;">avalon.jar</td>

      <td style="width: 589px;"><a href="http://www.apache.org/dyn/closer.cgi/avalon">Apache Avalon Framework</a></td>

    </tr>

    <tr>

      <td style="width: 285px;">fop.jar</td>

      <td style="width: 589px;"><a href="http://xmlgraphics.apache.org/fop/">Apache FOP</a></td>

    </tr>

    <tr>

      <td style="width: 285px;">batik.jar</td>

      <td style="width: 589px;"><a href="http://xmlgraphics.apache.org/batik/">Apache Batik</a></td>

    </tr>

    <tr>

      <td style="width: 285px;">jimi.zip</td>

      <td style="width: 589px;"><a href="http://java.sun.com/products/jimi/index.html">JIMI</a></td>

    </tr>

    <tr>

      <td style="width: 285px;">jh.home</td>

      <td style="width: 589px;"><a href="http://java.sun.com/products/javahelp/download_binary.html">JavaHelp</a></td>

    </tr>

    <tr>

      <td style="width: 285px;">jwsdp.home</td>

      <td style="width: 589px;"><a href="http://java.sun.com/webservices/downloads/1.6/index.html">Java Web Services version 1.6</a></td>

    </tr>

    <tr>

      <td style="width: 285px;">emma.dir</td>

      <td style="width: 589px;"><a href="http://emma.sourceforge.net/">EMMA</a> free Java code coverage tool </td>

    </tr>

    <tr>

      <td style="width: 285px;">postgres.jdbcdriver</td>

      <td style="width: 589px;">This is usually part of the postgres distribution or can be downloaded at <a href="http://www.postgresql.org/download/">PostgreSQL</a></td>

    </tr>

    <tr>

      <td style="width: 285px;">oracle.jdbcdriver</td>

      <td style="width: 589px;">This is usually part of the Oracle distribution &nbsp;[OraHome]/jdbc/lib/classes12.jar</td>

    </tr>

  
  </tbody>
</table>

<p><span style="background-color: rgb(255, 0, 0);"><span style="background-color: rgb(255, 255, 255);"></span></span></p>

<p><span style="background-color: rgb(255, 0, 0);"><span style="background-color: rgb(255, 255, 255);">The
next step is to checkout the correct repository and to adjust some
configuration files to your local setup. See the following example for
a Grid Engine maintrunk system (for Grid Engine 6.0u8 or
higher&nbsp;the same procedure applies with the difference that you
have to use cvs co -r V60_ARCO_BRANCH arco for the checkout and the
references for sge.root and sge.srcdir should point to a Grid Engine
6.0u8 or higher)</span></span></p>


<p><span style="background-color: rgb(255, 0, 0);"><span style="background-color: rgb(255, 255, 255);"></span></span></p>


<table style="text-align: left; width: 100%; background-color: rgb(204, 204, 255);" border="1" cellpadding="2" cellspacing="2">


  <tbody>


    <tr>


      <td align="left" valign="top">
      
      
      <pre>Extraction of the packages above<br><br>% cvs co arco<br>% cd arco/source<br>% cp build.properties build_private.properties<br><br>edit build_private.properties<br>8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------<br>product.version=Maintrunc<br>product.name=GE<br>product.longname=Grid Engine<br><br>#<br># Commmon site directories<br>#<br>copyright.dir=/home/aa114085/ARCHIVE/n1ge6-copyright<br>junit.jar=&lt;somedir&gt;/junit.jar<br>jwsdp.home=&lt;somedir&gt;/jwsdp-1.6<br>#<br># These files are in the swc distribution usually under<br># /opt/sun/private/share/lib<br># /usr/share/webconsole/lib<br>#<br>servlet.jar=&lt;somedir&gt;/servlet.jar<br>swc.jato.jar=&lt;somedir&gt;/jato.jar<br>swc.cc.jar=&lt;somedir&gt;/cc.jar<br>swc.services_impl.jar=&lt;somedir&gt;/serviceimpl.jar<br>swc.services.jar=&lt;somedir&gt;/serviceapi.jar<br>swc.webcommon.jar=&lt;somedir&gt;/SMIWebCommon.jar<br>oracle.jdbcdriver=&lt;somedir&gt;/classes12.jar<br>postgres.jdbcdriver=&lt;somedir&gt;/postgresql-7.4.2.jar<br>Webapps.home=/var/opt/webconsole/webapps<br>jfreechart.jar=&lt;somedir&gt;/jfreechart-1.0.3/lib/jfreechart-1.0.3.jar<br>jcommon.jar=&lt;somedir&gt;/jfreechart-1.0.3/lib/jcommon-1.0.6.jar<br>avalon.jar=&lt;somedir&gt;/avalon-framework-4.2.0.jar<br>fop.jar=&lt;somedir&gt;/fop.jar<br>batik.jar=&lt;somedir&gt;/batik.jar<br>jimi.zip=&lt;somedir&gt;/JimiProClasses.zip<br>jh.home=/usr/java/packages/javax.help-2.0/javahelp<br>emma.dir=&lt;somedir&gt;/emma-2.0.5312/lib<br><br>#<br># Path to SGE_ROOT <br>#<br>sge.root=&lt;SGE_ROOT dir path&gt;<br>#<br>#  Path to the SGE source tree<br>#<br>sge.srcdir=&lt;path to the sge source directory  or just a dummy string&gt;<br><br>#<br>#  Compile options<br>#<br>compile.debug=true<br><br>8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------<br><br>Please check if all jar files are available at the listed places. Otherwise your compilation will fail.<br><br>edit build.site<br>ANT_HOME=&lt;somewhere&gt;/apache-ant-1.6.5<br>WSDP_HOME=&lt;somewhere&gt;/jwsdp-1.6<br>JAVA_HOME=/usr/java/jdk1.5.0_06<br><br>Compilation:<br>% build.sh clean<br>% build.sh dist<br><br>The result are reporting/reporting.tar.gz and dbwriter/dbwriter.tar.gz.<br></pre>


      </td>


    </tr>


  
  
  </tbody>
</table>


<p><span style="background-color: rgb(255, 0, 0);"><span style="background-color: rgb(255, 255, 255);"></span></span></p>


<h2><a name="Install_ARCo"></a>Install ARCo</h2>

<h3><a name="Install_PostgreSQL">Install <noop>PostgreSQL </noop></a></h3>






<h3><a name="Configure_PostgreSQL">Configure <noop>PostgreSQL </noop></a></h3>





<p>
Follow the <noop>PostgreSQL instructions, set up a user, create a data directory, and init the database:
</noop></p>




<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">


  <tbody>


    <tr>


      <td align="left" valign="top">
      
      
      <pre>bash-2.05# useradd -c "PostgreSQL admin" -d /export/home/postgres -m -s /bin/bash postgres<br>bash-2.05# passwd postgres<br>bash-2.05# mkdir /usr/local/pgsql/data<br>bash-2.05# chown postgres /usr/local/pgsql/data<br>bash-2.05$ initdb -D /usr/local/pgsql/data <br>The files belonging to this database system will be owned by user "postgres".<br>This user must also own the server process.<br><br>The database cluster will be initialized with locale C.<br><br>fixing permissions on existing directory /usr/local/pgsql/data... ok<br>creating directory /usr/local/pgsql/data/base... ok<br>creating directory /usr/local/pgsql/data/global... ok<br>creating directory /usr/local/pgsql/data/pg_xlog... ok<br>creating directory /usr/local/pgsql/data/pg_clog... ok<br>selecting default max_connections... 40<br>selecting default shared_buffers... 800<br>creating configuration files... ok<br>creating template1 database in /usr/local/pgsql/data/base/1... ok<br>initializing pg_shadow... ok<br>enabling unlimited row size for system tables... ok<br>initializing pg_depend... ok<br>creating system views... ok<br>loading pg_description... ok<br>creating conversions... ok<br>setting privileges on built-in objects... ok<br>creating information schema... ok<br>vacuuming database template1... ok<br>copying template1 to template0... ok<br><br>Success. You can now start the database server using:<br><br>    /usr/local/pgsql/bin/postmaster -D /usr/local/pgsql/data<br>or<br>    /usr/local/pgsql/bin/pg_ctl -D /usr/local/pgsql/data -l logfile start<br></pre>


      </td>


    </tr>


  
  
  </tbody>
</table>


<p>To start the database I run <code>pg_ctl -D /usr/local/pgsql/data -l /var/log/postgres start -o "-i"</code>. The <code>-o "-i"</code> option is suposed to allow TCP/IP connections to the database.
</p>




<p>
To get <code>pg_ctl</code> to work without having to specify where the data is set the <code>PGDATA</code>:
</p>




<pre>PGDATA=/usr/local/pgsql/data/<br>export PGDATA<br></pre>





<p>

Consult the <a href="http://www.postgresql.org/docs">PostgreSQL documentation</a>&nbsp;for further details.</p>




<h3><a name="Configuring_PostgreSQL_for_ARCo"> </a> Configuring <noop>PostgreSQL for ARCo </noop></h3>





<p>
Follow these <a href="http://docs.sun.com/app/docs/doc/817-6118/6mlhe9ael?a=view" target="_top">instructions</a> on docs.sun.com. The following&nbsp;
</p>






<ul>





  <li> Adjustment of <code>pg_hba.conf</code> file as follows:</li>





</ul>







<pre></pre>


<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">


  <tbody>


    <tr>


      <td align="left" valign="top">
      
      
      <pre># TYPE  DATABASE    USER        IP-ADDRESS        IP-MASK           METHOD<br><br>local   all         postgres                                        trust<br>local   all         all                                             md5<br># IPv4-style local connections:<br>host    all         all         192.168.100.0     255.255.255.0     trust<br></pre>





      </td>


    </tr>


  
  
  </tbody>
</table>


<br>


<ul>





  <li> Modified my <code>postgresql.conf</code> as per the instructions to enable IP connections, simply change the <code>tcpip_socket</code> line to true and uncomment it.
  </li>






</ul>


<h3><a name="Setting_up_ARCo_propper"> </a> Setting up ARCo propper </h3>






<p>
Work through the <a href="http://docs.sun.com/app/docs/doc/817-6118/6mlhe9aes?a=view" target="_top">instructions</a>.
</p>




<p>
</p>




<ul>





  <li> Enable monitorting
  </li>





</ul>





<pre>bash-2.05$ qconf -mconf<br></pre>





<p>
Change the following:
</p>




<p>
</p>




<pre>...<br>reporting_params    accounting=true  reporting=true flush_time=00:00:15 joblog=true  sharelog=00:00:00<br>...<br></pre>





<p>
Also:
</p>






<pre>bash-2.05$ qconf -me global<br></pre>





<p>
Change the following:
</p>






<pre>hostname              global<br>...<br>report_variables      cpu,np_load_avg,mem_free,virtual_free<br>...<br></pre>





<p>
</p>




<ul>





  <li> Install the dbwriter software. Make sure you do this as root (or
more properly, make sure your sgeadmin user actually owns the files!)
  </li>





</ul>







<pre>bash-2.05$ ./inst_dbwriter <br><br>Welcome to the Grid Engine installation<br>---------------------------------------<br><br>Grid Engine dbWriter installation<br>---------------------------------<br>The dbWriter installation will take approximately 5 minutes<br><br>Hit <return> to continue &gt;&gt; <br><br><br>Generic Parameters<br>------------------<br><br>Please enter your SGE_ROOT [/usr/N1GE6] &gt;&gt; <br><br>Please enter your SGE_CELL [default] &gt;&gt; <br>Please enter the path to your java 1.4 installation [] &gt;&gt; /usr/java<br><br>Setup your database connection parameters<br>-----------------------------------------<br><br>Enter your database type ( o = Oracle, p = PostgreSQL ) [p] &gt;&gt;    <br><br><br>Please enter the name of your postgresql db host [] &gt;&gt; b100x-1<br>Please enter the port of your postgresql db [5432] &gt;&gt; <br><br>Please enter the name of your postgresql database [arco] &gt;&gt; <br><br>Please enter the name of the database user [arco_write] &gt;&gt; <br><br>Please enter the password of the database user &gt;&gt; <br>Please retype the password &gt;&gt; <br><br>Please enter the name of the database schema [public] &gt;&gt; <br><br>Search for the jdbc driver org.postgresql.Driver <br>in directory /usr/N1GE6/dbwriter/lib .........<br>found in /usr/N1GE6/dbwriter/lib/pg73jdbc2.jar<br><br>Enter your database type ( o = Oracle, p = PostgreSQL ) [p] &gt;&gt; <br><br><br>Please enter the name of your postgresql db host [b100x-1] &gt;&gt; <br><br>Please enter the port of your postgresql db [5432] &gt;&gt; <br><br>Please enter the name of your postgresql database [arco] &gt;&gt; <br><br>Please enter the name of the database user [arco_write] &gt;&gt; <br><br>Please enter the password of the database user &gt;&gt; <br>Please retype the password &gt;&gt; <br><br>Please enter the name of the database schema [public] &gt;&gt; <br><br>Search for the jdbc driver org.postgresql.Driver <br>in directory /usr/N1GE6/dbwriter/lib .........<br>found in /usr/N1GE6/dbwriter/lib/pg73jdbc2.jar<br><br>Should the connection to the database be tested? (y/n) [y] &gt;&gt; <br><br>Test db connection to 'jdbc:postgresql://b100x-1:5432/arco' ... OK<br><br><br>Please enter the interval between two dbwriter runs in seconds [60] &gt;&gt; <br><br>Please enter the file with the derived value rules [$SGE_ROOT/dbwriter/database/postgres/dbwriter.xml] &gt;&gt; <br><br>The dbWriter can run with different debug levels<br>Possible values: WARNING INFO CONFIG FINE FINER FINEST<br>Please enter the debug level of the dbwriter [INFO] &gt;&gt; <br><br>All parameters are now collected<br>--------------------------------<br><br>      SGE_ROOT=/usr/N1GE6<br>      SGE_CELL=default<br>     JAVA_HOME=/usr/java (java version "1.4.1_03")<br>        DB_URL=jdbc:postgresql://b100x-1:5432/arco<br>       DB_USER=arco_write<br>      INTERVAL=60<br>REPORTING_FILE=$SGE_ROOT/$SGE_CELL/common/reporting<br>  DERIVED_FILE=$SGE_ROOT/dbwriter/database/postgres/dbwriter.xml<br>   DEBUG_LEVEL=INFO<br><br>Are this settings correct? (y/n) [y] &gt;&gt; <br><br>Create start script sgedbwriter in /usr/N1GE6/dbwriter/bin<br><br>Create configuration file for dbWriter in /usr/N1GE6/default/common<br>Installation of dbWriter completed<br>Start the dbWriter with /usr/N1GE6/dbwriter/bin/sgedbwriter start<br></return></pre>







<ul>





  <li> Set it to run on every boot
  </li>





</ul>







<pre>bash-2.05# pwd<br>/usr/N1GE6/dbwriter<br>bash-2.05# cp bin/sgedbwriter /etc/init.d<br>bash-2.05# ln -s /etc/init.d/sgedbwriter /etc/rc2.d/S98sgedbwriter<br>bash-2.05# /etc/init.d/sgedbwriter start<br>starting dbWriter<br>Spool directory /usr/N1GE6/default/spool/b100x-1 does not exist.<br>Should it be created? (y/n) &gt;&gt; y<br><br></pre>







<h3><a name="Install_Lockhart"> Install Sun Web Console if not present (solaris, linux only) </a></h3>

<br>

<h3><a name="Install_reporting">Install reporting </a></h3>





<p>
Go with the defaults . . .
</p>




<p>
</p>




<pre>bash-2.05# pwd<br>/usr/N1GE6/reporting<br>bash-2.05# ./inst_reporting <br><br>Welcome to the  N1 SGE reporting module installation<br>----------------------------------------------------<br>The installation will take approximately 5 minutes<br><br>Hit <return> to continue &gt;&gt; <br><br>Please enter the path to your java 1.4 installation [] &gt;&gt; /usr/java<br>Spool directory<br>---------------<br><br>In the spool directory the N1 SGE reporting module will<br>store all queries and results<br><br>Please enter the path to the spool directory [/var/spool/arco] &gt;&gt; <br><br><br>Database Setup<br>--------------<br><br>Enter your database type ( o = Oracle, p = PostgreSQL ) [p] &gt;&gt; <br><br><br>Please enter the name of your postgresql db host [] &gt;&gt; b100x-1<br><br>Please enter the port of your postgresql db [5432] &gt;&gt; <br><br>Please enter the name of your postgresql database [arco] &gt;&gt; <br><br>Please enter the name of the database user [arco_read] &gt;&gt; <br><br>Please enter the password of the database user &gt;&gt; <br>Please retype the password &gt;&gt; <br><br>Please enter the name of the database schema [public] &gt;&gt; <br><br>Search for the jdbc driver org.postgresql.Driver <br>in directory /usr/N1GE6/reporting/WEB-INF/lib ..............<br>found in /usr/N1GE6/reporting/WEB-INF/lib/postgresql-7.4.2.jar<br><br>Should the connection to the database be tested? (y/n) [y] &gt;&gt; <br><br>Test db connection to 'jdbc:postgresql://b100x-1:5432/arco' ... OK<br><br>Configure users with write access<br>---------------------------------<br>Enter a login name of a user (Press enter to finish) &gt;&gt; pj113073 <br><br>Users: pj113073<br>Enter a login name of a user (Press enter to finish) &gt;&gt; user2<br><br>Users: pj113073 user2<br>Enter a login name of a user (Press enter to finish) &gt;&gt; <br><br>All parameters are now collected<br>--------------------------------<br>       SPOOL_DIR=/var/spool/arco<br>          DB_URL=jdbc:postgresql://b100x-1:5432/arco<br>         DB_USER=arco_read<br>ARCO_WRITE_USERS=pj113073 user2<br><br>Are this settings correct? (y/n) [y] &gt;&gt; y<br><br>/usr/sadm/bin/smcwebserver: server not running - /var/run/smcwebserver.pid does not exist<br><br>Directory /var/spool/arco does not exist, create it? (y/n) [y] &gt;&gt; <br><br>Create directory /var/spool/arco<br>Create directory /var/spool/arco/queries<br>Copy predefined queries into /var/spool/arco/queries<br>Create directory /var/spool/arco/results<br>Create directory /usr/N1GE6/reporting/charts<br>Create directory /usr/N1GE6/reporting/export<br>Register the N1 SGE reporting module in the webconsole<br><br>    Registering com.sun.grid.arco_6.<br><br>Starting Sun(TM) Web Console Version 2.0.3...<br>See /var/log/webconsole/console_debug_log for server logging information<br></return></pre>






<p></p>




</body>
</html>
